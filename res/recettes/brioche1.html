<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />

    <title>Snayyk-hub | Recette de brioche pur beurre</title>
    <!-- Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../css/index.css">
  </head>

  <header>
    <!-- Barre de navigation-->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
          
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="../../index.html">Accueil</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../recettes.html" style="color: red;">Recettes</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- Fin de la barre de navigation-->
  </header>


  <body class="pt-5 mt-5 mb-5 pb-5 container-fluid">



      <!--Fil d'ariane-->
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="../recettes.html">Recettes</a></li>
          <li class="breadcrumb-item active" aria-current="page">Brioche pur beurre</li>
        </ol>
      </nav>
      <!--Fin fil d'ariane-->

      <!--Liste des ingrédients-->
      <div class="container-fluid">
        <h4>Liste des ingrédients pour <span id="nombre_total" type="number">2</span> <span id="grossebrioche">grosses brioches</span></h4>
        
        <div class="form-floating mt-3 mb-3 col-md-3 col-sm-4">
            <input type="number" class="form-control" id="floatingInput" step="0.5" value="1" onchange="dosage();" min="0.5">
            <label for="floatingInput">Multiplier le dosage</label>
        </div>
        <ul>
            <li>
                Beurre - <span id="beurre">250</span>g
            </li>
            <li>
                Farine de gruau T45 - <span id="farine">500</span>g
            </li>
            <li>
                lait - <span id="lait">10</span>cl
            </li>
            <li>
                levure fraîche - <span id="levure">18</span>g
            </li>
            <li>
                sucre - <span id="sucre">100</span>g
            </li>
            <li>
                oeufs - <span id="oeuf">4</span> (+1 pour la dorure)
            </li>
            <li>
                sel - <span id="sel">12</span>g
            </li>
        </ul>
      </div>
      <!---->
    <div class="row "> 
        <div class="col-1 "></div>
        <div class="col-10">
            <ol>
                <li class="pt-3">
                    <h5>Réaliser un pré-ferment</h5>
                    Verser le lait tiède, la levure et <span id="preferment">100</span>g de farine dans la cuve.<br>Mélanger au doigt ou avec le manche d'une cuillère à bois.
                    <br>Verser le reste de la farine sur le dessus sans mélanger. Laisser lever à température ambiante jusqu'à ce que le pré-ferment perce le dessus de la farine (15 à 30min).
                </li>
                <li class="pt-3">
                    <h5>Pétrissage</h5>
                    Rajouter les oeufs, le sucre et le sel.<br>Pétrir au robot (avec crochet) à vitesse  1 pendant 5 minutes, puis à vitesse 2 pendant 10 minutes.
                    <br>Icorporer le beurre mou petit à petit. Pétrir 15 à 20 minutes toujours à vitesse 2. La pâte doit se décoller des bords, être souple, élastique et ne pas coller aux mains !
                </li>
                <li class="pt-3">
                    <h5>Première levée</h5>
                    Recouvrir la pâte d'un torchon éventuellement humide et laisser lever pendant ~1h30 à température ambiante.
                </li>
                <li class="pt-3">
                    <h5>Deuxième levée</h5>
                    Fleurer le plan de travail. Récupérer la pâte, l'abaisser grossièrement à la main et donner 2x2 rabats en changeant de sens (en portefeuille).
                    <br>Placer la pâte dans un récipient avec suffisamment de hauteur pour que la pâte double de volume. Filmer et mettre au frigo pendant 8 à 16h.
                </li>
                <li class="pt-3">
                    <h5>Mise en forme et troisième levée</h5>
                    Fleurer le plan de travail.<br>
                    Récupérer la pâte, la détailler en fonction du nombre de brioche total voulu.
                    <br>Abaisser la pâte au rouleau, en forme de rectangle (comme une pâte feuilletée) et donner deux à trois tours simples. 
                    On doit obtenir une pâte forte, si elle est forte au deuxième tour, on s'arrête là.
                    <br>Former la brioche comme on l'entend, dans un moule. Laisser lever pendant 45min à 4h en fonction de la température. La brioche doit arriver à hauteur du moule, ou doubler de volume...
                </li>
                <li class="pt-3">
                    <h5>Dorure et cuisson</h5>
                    On dore le dessus de la brioche avec un oeuf ou tout autre dorure.
                    Cuisson au four à 180 C° pendant 20 à 40 minutes (moins si vous faîtes des briochettes).
                </li>
            </ol>
        </div>
        <div class="col-1 "></div>
    </div> 
    <div class="container-fluid">
      <h1>lipides:<span id="lipide">1</span></h1>
    </div>
    </body>
  </html>

  <script>
    var ingredients;
    var baseNOMBRE = 2,baseBEURRE = 250, baseLAIT = 10, baseFARINE = 500, baseLEVURE = 18, baseSUCRE = 100, baseOEUF = 4, baseSEL = 12; //variables de base
    var nombre = 2, beurre = [1,250], lait = 10, farine = 500, levure = 18, sucre = 100, oeuf = 4, sel = 12; // variables actuelles
    var tableau = [[1,250],[2,10],[3,500],[5,18],[7,100],[6,4],[8,12]];
    var proteine = 0, lipide = 0, glucide = 0;

    var url = "https://snayyk.github.io/res/js/ingredients.json";
    var request = new XMLHttpRequest();
    request.open("GET", url);
    request.responseType = "json";
    request.send();

    request.onload = function () {

      ingredients = request.response;
      //calories(ingredients);
      calories();
    };
    

    function dosage(){
        //Partie dosage
        var valeur = document.querySelector("input").value;
        //var baseNOMBRE = 2,baseBEURRE = 250, baseLAIT = 10, baseFARINE = 500, baseLEVURE = 18, baseSUCRE = 100, baseOEUF = 4, baseSEL = 12; //variables de base
        //var nombre = 0, beurre = 0, lait = 0, farine = 0, levure = 0, sucre = 0, oeuf = 0, sel = 0; // variables actuelles
        if( valeur == 0.5){
            document.getElementById("grossebrioche").innerHTML = "grosse brioche";
        } else {
            document.getElementById("grossebrioche").innerHTML = "grosses brioches";
        }
        nombre = baseNOMBRE * valeur;
        tableau[0][1] = baseBEURRE * valeur;
        tableau[1][1] = baseLAIT * valeur;
        tableau[2][1] = baseFARINE * valeur;
        tableau[6][1] = baseSEL * valeur;
        tableau[3][1] = baseLEVURE * valeur;
        tableau[4][1] = baseSUCRE * valeur;
        tableau[5][1] = baseOEUF * valeur;
        document.getElementById("nombre_total").innerHTML = nombre;
        document.getElementById("beurre").innerHTML = tableau[0][1];
        document.getElementById("lait").innerHTML = tableau[1][1];
        document.getElementById("sel").innerHTML = tableau[6][1];
        document.getElementById("levure").innerHTML = tableau[3][1];
        document.getElementById("farine").innerHTML = tableau[2][1];
        document.getElementById("sucre").innerHTML = tableau[4][1];
        document.getElementById("oeuf").innerHTML = tableau[5][1];
        
        document.getElementById("preferment").innerHTML = (baseFARINE * valeur) / 5;
        
        //Partie calories
        //document.getElementById("lipide").innerHTML = ingredients["ingredients"][0]["lipide"];
        calories();
    }

    function calories(){
      //coef = valeurACT/valeurREF
      lipide = 0, proteine = 0, glucide = 0;
      for(var i = 0; i < ingredients.length ; i++){
        var coef = 0, indice = 0;
        for(y = 0; tableau[y][0] != ingredients["ingredients"][i]["id"]; y++){
          indice = y;
        } 
        coef = tableau[indice][1] / ingredients["ingredients"][i]["quantite"];
        proteine += ingredients["ingredients"][i]["proteine"]*coef;
        lipide += ingredients["ingredients"][i]["lipide"]*coef;
        glucide += ingredients["ingredients"][i]["glucide"]*coef;
        console.log(lipide,proteine,glucide);
        // ESSAIE DE FAIRE UN TABLEAU DE BASE ET ACTUELLE POUR LES INGREDIENTS AVEC LEUR VALEUR ETC COMME DANS LE JSON POUR LIER LES DONNEES
        // BOUCLE DANS UNE BOUCLE
      }
      
      
      }


  </script>